<mxfile host="app.diagrams.net" modified="2024-01-15T10:00:00.000Z" agent="5.0" etag="jkl012" version="22.1.16" type="device">
  <diagram name="Gestion des Assets" id="asset-management">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Titre -->
        <mxCell id="title" value="R-Type 2 - Système de Gestion des Assets" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="20" width="569" height="30" as="geometry" />
        </mxCell>
        
        <!-- PreloadScene Flow -->
        <mxCell id="preload-title" value="PRELOADSCENE - FLUX DE CHARGEMENT" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="70" width="400" height="30" as="geometry" />
        </mxCell>
        
        <!-- Step 1: Fallback Creation -->
        <mxCell id="step1" value="1. Création Fallbacks" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="120" width="150" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="step1-detail" value="• createPlayerTexture()&#xa;• createEnemyTexture()&#xa;• createBulletTexture()&#xa;• Textures procédurales&#xa;• Garantie de disponibilité" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="80" y="170" width="150" height="70" as="geometry" />
        </mxCell>
        
        <!-- Step 2: SVG Loading -->
        <mxCell id="step2" value="2. Chargement SVG" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="280" y="120" width="150" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="step2-detail" value="• load.svg('player-delorean')&#xa;• load.svg('enemy1', 'enemy2', 'enemy3')&#xa;• load.svg('bullet-svg')&#xa;• Dimensions optimisées&#xa;• Clés uniques" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="280" y="170" width="150" height="70" as="geometry" />
        </mxCell>
        
        <!-- Step 3: Verification -->
        <mxCell id="step3" value="3. Vérification" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="120" width="150" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="step3-detail" value="• checkAssetLoading()&#xa;• Logs de statut&#xa;• Comptage des assets&#xa;• Diagnostic complet&#xa;• Debug intégré" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="480" y="170" width="150" height="70" as="geometry" />
        </mxCell>
        
        <!-- Arrows -->
        <mxCell id="arrow1-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#2D7600;" edge="1" parent="1" source="step1" target="step2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <mxCell id="arrow2-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;strokeColor=#2D7600;" edge="1" parent="1" source="step2" target="step3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        
        <!-- Asset Structure -->
        <mxCell id="structure-title" value="STRUCTURE DES ASSETS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="280" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="assets-folder" value="assets/" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="320" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="images-folder" value="images/" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="220" y="320" width="80" height="40" as="geometry" />
        </mxCell>
        
        <!-- SVG Files -->
        <mxCell id="player-svg" value="player.svg&#xa;64x32px&#xa;DeLorean" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="80" y="390" width="80" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="enemy1-svg" value="enemy1.svg&#xa;32x32px&#xa;Rouge" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="170" y="390" width="80" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="enemy2-svg" value="enemy2.svg&#xa;32x32px&#xa;Violet" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="260" y="390" width="80" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="enemy3-svg" value="enemy3.svg&#xa;32x32px&#xa;Vert" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="350" y="390" width="80" height="50" as="geometry" />
        </mxCell>
        
        <mxCell id="bullet-svg" value="bullet.svg&#xa;8x4px&#xa;Projectile" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="440" y="390" width="80" height="50" as="geometry" />
        </mxCell>
        
        <!-- Texture System -->
        <mxCell id="texture-title" value="SYSTÈME DE TEXTURES" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="280" width="200" height="30" as="geometry" />
        </mxCell>
        
        <!-- SVG Textures -->
        <mxCell id="svg-textures" value="Textures SVG" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="320" width="120" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="svg-list" value="• player-delorean&#xa;• enemy1, enemy2, enemy3&#xa;• bullet-svg&#xa;• Haute qualité&#xa;• Vectoriel" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="600" y="355" width="120" height="65" as="geometry" />
        </mxCell>
        
        <!-- Fallback Textures -->
        <mxCell id="fallback-textures" value="Textures Fallback" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="750" y="320" width="120" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="fallback-list" value="• player (vert)&#xa;• enemy (rouge)&#xa;• bullet (cyan)&#xa;• Procédurales&#xa;• Garanties" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="750" y="355" width="120" height="65" as="geometry" />
        </mxCell>
        
        <!-- Selection Logic -->
        <mxCell id="selection-title" value="LOGIQUE DE SÉLECTION" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="480" width="200" height="30" as="geometry" />
        </mxCell>
        
        <!-- Player Selection -->
        <mxCell id="player-selection" value="Player Sprite" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="520" width="100" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="player-logic" value="textureKey = scene.textures.exists('player-delorean')&#xa;  ? 'player-delorean'&#xa;  : 'player'" style="text;html=1;strokeColor=#82b366;fillColor=#d5e8d4;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="80" y="555" width="200" height="40" as="geometry" />
        </mxCell>
        
        <!-- Enemy Selection -->
        <mxCell id="enemy-selection" value="Enemy Sprite" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="520" width="100" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="enemy-logic" value="Enemy.getRandomEnemyTexture(scene):&#xa;• Vérifier enemy1, enemy2, enemy3&#xa;• Sélection aléatoire&#xa;• Fallback si aucun SVG" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="320" y="555" width="180" height="50" as="geometry" />
        </mxCell>
        
        <!-- Loading States -->
        <mxCell id="states-title" value="ÉTATS DE CHARGEMENT" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="480" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="loading-state" value="LOADING" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="520" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="success-state" value="SUCCESS" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="690" y="520" width="80" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="fallback-state" value="FALLBACK" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="780" y="520" width="80" height="30" as="geometry" />
        </mxCell>
        
        <!-- Debug System -->
        <mxCell id="debug-title" value="SYSTÈME DE DEBUG" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="640" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="debug-logs" value="Logs de Debug" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="80" y="680" width="120" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="debug-examples" value="🎮 Asset loading status:&#xa;- Player (DeLorean): ✅ SVG Loaded&#xa;- Enemy 1: ✅ Loaded&#xa;- Enemy 2: ✅ Loaded&#xa;- Enemy 3: ✅ Loaded&#xa;🎯 3/3 enemy types loaded&#xa;🚗 Player using DeLorean sprite!" style="text;html=1;strokeColor=#9673a6;fillColor=#e1d5e7;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="80" y="715" width="200" height="90" as="geometry" />
        </mxCell>
        
        <!-- Performance -->
        <mxCell id="perf-title" value="OPTIMISATIONS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="350" y="640" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="perf-list" value="• Chargement asynchrone&#xa;• Textures mises en cache&#xa;• Fallbacks immédiats&#xa;• Pas de duplication&#xa;• Gestion mémoire optimisée&#xa;• Vérification d'existence&#xa;• Logs conditionnels" style="text;html=1;strokeColor=#d79b00;fillColor=#ffe6cc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="350" y="680" width="180" height="100" as="geometry" />
        </mxCell>
        
        <!-- Error Handling -->
        <mxCell id="error-title" value="GESTION D'ERREURS" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="600" y="640" width="200" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="error-handling" value="• SVG non trouvé → Fallback&#xa;• Erreur de chargement → Log&#xa;• Texture manquante → Création&#xa;• Dimensions invalides → Défaut&#xa;• Corruption → Régénération&#xa;• Timeout → Fallback&#xa;• Mémoire insuffisante → Cleanup" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="600" y="680" width="200" height="100" as="geometry" />
        </mxCell>
        
        <!-- Test Interface -->
        <mxCell id="test-title" value="INTERFACES DE TEST" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="850" y="640" width="150" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="test-files" value="• test-delorean.html&#xa;• test-enemy-colors.html&#xa;• test-alien-terrain.html&#xa;• Vérification visuelle&#xa;• Tests de chargement" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="850" y="680" width="150" height="80" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
