<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R-Type 2 - Remake (Sans Cache)</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }
        
        #game-container {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .loading {
            text-align: center;
            font-size: 24px;
            color: #00ff00;
        }
        
        .cache-info {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.8);
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            color: #00ff00;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="cache-info">
        üîÑ SANS CACHE - Terrain Opacit√© 100%<br>
        Fichiers recharg√©s: <?php echo date('H:i:s'); ?>
    </div>
    
    <div id="game-container">
        <div class="loading">
            üöÄ Chargement R-Type 2 (Terrain 100% Opaque)...<br>
            <small>Fichiers JavaScript recharg√©s sans cache</small>
        </div>
    </div>

    <!-- Phaser.js -->
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
    
    <!-- Game files avec timestamp pour √©viter le cache -->
    <script>
        // G√©n√©rer un timestamp unique pour forcer le rechargement
        const timestamp = new Date().getTime();
        console.log('üîÑ Loading game files with timestamp:', timestamp);
        
        // Charger les fichiers avec timestamp
        const scripts = [
            'js/config.js',
            'js/managers/ScoreManager.js',
            'js/managers/LevelManager.js',
            'js/entities/Player.js',
            'js/entities/Enemy.js',
            'js/entities/Bullet.js',
            'js/entities/Boss.js',
            'js/entities/AlienTerrain.js',
            'js/scenes/PreloadScene.js',
            'js/scenes/MenuScene.js',
            'js/scenes/GameScene.js',
            'js/scenes/GameOverScene.js',
            'js/main.js'
        ];
        
        let loadedScripts = 0;
        
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = `${src}?v=${timestamp}`;
                script.onload = () => {
                    loadedScripts++;
                    console.log(`‚úÖ Loaded: ${src} (${loadedScripts}/${scripts.length})`);
                    resolve();
                };
                script.onerror = () => {
                    console.error(`‚ùå Failed to load: ${src}`);
                    reject();
                };
                document.head.appendChild(script);
            });
        }
        
        // Charger tous les scripts s√©quentiellement
        async function loadAllScripts() {
            try {
                for (const script of scripts) {
                    await loadScript(script);
                }
                console.log('üéÆ All scripts loaded successfully with fresh cache');
                
                // Masquer le message de chargement
                document.querySelector('.loading').style.display = 'none';
                
                // Message de confirmation
                setTimeout(() => {
                    console.log('‚úÖ Game should now use terrain with 100% opacity (native Phaser objects)');
                    console.log('üåç If terrain is still semi-transparent, there may be a deeper caching issue');
                }, 2000);
                
            } catch (error) {
                console.error('‚ùå Error loading scripts:', error);
                document.querySelector('.loading').innerHTML = 
                    '‚ùå Erreur de chargement<br><small>V√©rifiez la console pour plus de d√©tails</small>';
            }
        }
        
        // D√©marrer le chargement
        loadAllScripts();
    </script>
</body>
</html>
