<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Terrain - OPACIT√â 100% FORC√âE</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #000;
            color: #fff;
            font-family: 'Courier New', monospace;
        }
        #game-container {
            border: 2px solid #fff;
            margin: 20px 0;
        }
        .info {
            background: #333;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .controls {
            background: #444;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .controls button {
            background: #666;
            color: #fff;
            border: none;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 3px;
            cursor: pointer;
        }
        .controls button:hover {
            background: #888;
        }
        .success {
            background: #2a4a2a;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #4f8;
        }
        .technical {
            background: #2a2a4a;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #44f;
        }
        .opacity-bar {
            width: 100%;
            height: 30px;
            background: #333;
            border-radius: 15px;
            margin: 10px 0;
            position: relative;
            overflow: hidden;
        }
        .opacity-fill {
            height: 100%;
            background: linear-gradient(90deg, #4f8, #8f4);
            border-radius: 15px;
            width: 100%;
            transition: width 0.3s ease;
        }
        .opacity-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: #fff;
            text-shadow: 1px 1px 2px #000;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>üîß Test Terrain - OPACIT√â 100% FORC√âE</h1>
    
    <div class="success">
        <h3>‚úÖ Nouvelle Approche - Objets Phaser Solides</h3>
        <p><strong>Le terrain utilise maintenant des objets Phaser natifs au lieu de graphics !</strong></p>
        
        <div class="opacity-bar">
            <div class="opacity-fill"></div>
            <div class="opacity-text">OPACIT√â 100% GARANTIE</div>
        </div>
        
        <ul>
            <li>‚úÖ <strong>Rectangles solides</strong> : Phaser.Rectangle au lieu de graphics.fillStyle</li>
            <li>‚úÖ <strong>Cercles solides</strong> : Phaser.Circle pour crat√®res et d√©tails</li>
            <li>‚úÖ <strong>Polygones solides</strong> : Phaser.Polygon pour cristaux aliens</li>
            <li>‚úÖ <strong>Containers</strong> : Organisation en conteneurs pour chaque segment</li>
        </ul>
    </div>
    
    <div class="technical">
        <h4>üîß Changement Technique Majeur</h4>
        <p><strong>Avant (Graphics - Probl√©matique) :</strong></p>
        <pre><code>graphics.fillStyle(color, 1.0);
graphics.fillRect(x, y, width, height); // Pouvait √™tre semi-transparent</code></pre>
        
        <p><strong>Apr√®s (Objets Phaser - 100% Solide) :</strong></p>
        <pre><code>const rect = this.scene.add.rectangle(x, y, width, height, color);
container.add(rect); // Toujours 100% opaque par d√©faut</code></pre>
    </div>
    
    <div class="info">
        <h3>üéØ Terrain avec Objets Solides</h3>
        <p>Chaque √©l√©ment du terrain est maintenant cr√©√© avec des objets Phaser natifs :</p>
        <ul>
            <li><strong>Base du terrain</strong> : Rectangle solide</li>
            <li><strong>Couches rocheuses</strong> : Rectangles superpos√©s</li>
            <li><strong>Crat√®res</strong> : Cercles solides (rebord + centre)</li>
            <li><strong>Rochers</strong> : Rectangles/Ellipses avec ombres</li>
            <li><strong>Cristaux aliens</strong> : Polygones triangulaires</li>
            <li><strong>V√©g√©tation</strong> : Rectangles + Cercles</li>
        </ul>
    </div>
    
    <div class="controls">
        <h3>üéÆ Test Opacit√© 100% Forc√©e</h3>
        <button onclick="testLevel(1)">Niveau 1 - Ast√©ro√Ødes Sombres SOLIDES</button>
        <button onclick="testLevel(2)">Niveau 2 - Ast√©ro√Ødes Clairs SOLIDES</button>
        <button onclick="testLevel(3)">Niveau 3 - Mars SOLIDE</button>
        <button onclick="testLevel(4)">Niveau 4 - Lune SOLIDE</button>
        <button onclick="testLevel(5)">Niveau 5 - Alien SOLIDE</button>
        <button onclick="compareOpacity()">Comparer Opacit√©</button>
    </div>
    
    <div class="info" id="validation">
        <h3>‚úÖ Validation Opacit√© 100%</h3>
        <div id="validation-info">
            <p><strong>V√©rifiez que :</strong></p>
            <ul>
                <li>‚úÖ <strong>Terrain 100% opaque</strong> : Aucune transparence visible</li>
                <li>‚úÖ <strong>Couleurs pleines</strong> : Pas de semi-transparence</li>
                <li>‚úÖ <strong>D√©tails nets</strong> : Tous les √©l√©ments bien d√©finis</li>
                <li>‚úÖ <strong>Contraste maximal</strong> : Couleurs satur√©es</li>
            </ul>
        </div>
    </div>
    
    <div id="game-container"></div>

    <!-- Phaser.js -->
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
    
    <!-- Game files -->
    <script src="js/config.js"></script>
    <script src="js/managers/ScoreManager.js"></script>
    <script src="js/managers/LevelManager.js"></script>
    <script src="js/entities/AlienTerrain.js"></script>
    
    <script>
        let game;
        let gameScene;
        let currentTerrain;
        
        // Configuration Phaser pour test opacit√© 100%
        const testConfig = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            parent: 'game-container',
            backgroundColor: '#001122',
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: { y: 0 },
                    debug: false
                }
            },
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };
        
        function preload() {
            console.log('üîß Loading assets for full opacity test...');
            // Pas besoin d'assets, tout est cr√©√© avec des objets Phaser
        }
        
        function create() {
            gameScene = this;
            
            // Initialiser le level manager
            this.levelManager = { currentLevel: 1 };
            
            // Cr√©er le terrain initial (niveau 1)
            currentTerrain = new AlienTerrain(this);
            
            // Texte d'information
            this.add.text(10, 10, 'Terrain OPACIT√â 100% FORC√âE - Objets Phaser Solides', {
                fontSize: '16px',
                fill: '#00ff00'
            });
            
            this.add.text(10, 30, 'Rectangles, Cercles et Polygones natifs - Garantie 100% opaque', {
                fontSize: '11px',
                fill: '#00ff00'
            });
            
            this.add.text(10, 50, 'Fini les graphics semi-transparents !', {
                fontSize: '12px',
                fill: '#ffff00'
            });
            
            updateValidationInfo(1);
            
            console.log('‚úÖ Full opacity terrain system ready for testing');
        }
        
        function update() {
            // Pas de logique d'update n√©cessaire
        }
        
        function testLevel(level) {
            console.log(`üåç Testing level ${level} terrain (FULL OPACITY FORCED)`);
            
            // Nettoyer le terrain pr√©c√©dent
            if (currentTerrain) {
                currentTerrain.destroy();
            }
            
            // Changer le niveau
            gameScene.levelManager.currentLevel = level;
            
            // Cr√©er le nouveau terrain avec objets solides
            currentTerrain = new AlienTerrain(gameScene);
            
            updateValidationInfo(level);
        }
        
        function compareOpacity() {
            console.log('üîÑ Comparing opacity - should be 100% solid');
            
            // Cr√©er un terrain de test avec fond contrast√©
            gameScene.cameras.main.setBackgroundColor('#FF0000'); // Rouge pour contraste
            
            setTimeout(() => {
                gameScene.cameras.main.setBackgroundColor('#001122'); // Retour normal
            }, 3000);
            
            updateValidationInfo('opacity-test');
        }
        
        function updateValidationInfo(level) {
            const validationDiv = document.getElementById('validation-info');
            
            const levelDescriptions = {
                1: {
                    name: 'üåë Niveau 1 - Ast√©ro√Ødes Sombres SOLIDES',
                    features: [
                        'Rectangles sombres 100% opaques (#2A2A2A)',
                        'Cercles de crat√®res solides (#0A0A0A)',
                        'Rochers rectangulaires avec ombres',
                        'Texture avec points solides'
                    ]
                },
                2: {
                    name: 'üå´Ô∏è Niveau 2 - Ast√©ro√Ødes Clairs SOLIDES',
                    features: [
                        'Rectangles clairs 100% opaques (#6A6A6A)',
                        'Cercles de crat√®res avec rebords lumineux',
                        'Rochers avec reflets rectangulaires',
                        'Poussi√®re avec cercles solides'
                    ]
                },
                3: {
                    name: 'üî¥ Niveau 3 - Mars SOLIDE',
                    features: [
                        'Base martienne rectangulaire (#8B4513)',
                        'Couches s√©dimentaires superpos√©es',
                        'Formations rocheuses rectangulaires',
                        'D√©p√¥ts de fer circulaires solides'
                    ]
                },
                4: {
                    name: 'üåï Niveau 4 - Lune SOLIDE',
                    features: [
                        'Base lunaire rectangulaire (#8C8C8C)',
                        'R√©golithe en rectangle solide',
                        'Crat√®res circulaires avec pics centraux',
                        'Roches elliptiques avec ombres'
                    ]
                },
                5: {
                    name: 'üëΩ Niveau 5 - Alien SOLIDE',
                    features: [
                        'Base organique rectangulaire color√©e',
                        'Formations circulaires bioluminescentes',
                        'Cristaux polygonaux triangulaires',
                        'V√©g√©tation rectangulaire + circulaire'
                    ]
                },
                'opacity-test': {
                    name: 'üîÑ Test d\'Opacit√© - Fond Rouge',
                    features: [
                        'Fond rouge temporaire pour contraste',
                        'Terrain doit rester 100% opaque',
                        'Aucune transparence visible',
                        'Couleurs pleines et satur√©es'
                    ]
                }
            };
            
            const info = levelDescriptions[level];
            
            validationDiv.innerHTML = `
                <h4>${info.name}</h4>
                <p><strong>V√©rifiez que :</strong></p>
                <ul>
                    <li>‚úÖ <strong>Terrain 100% opaque</strong> : Aucune transparence visible</li>
                    <li>‚úÖ <strong>Couleurs pleines</strong> : Pas de semi-transparence</li>
                    <li>‚úÖ <strong>D√©tails nets</strong> : Tous les √©l√©ments bien d√©finis</li>
                    <li>‚úÖ <strong>Contraste maximal</strong> : Couleurs satur√©es</li>
                </ul>
                <p><strong>√âl√©ments solides cr√©√©s :</strong></p>
                <ul>
                    ${info.features.map(feature => `<li>${feature}</li>`).join('')}
                </ul>
                <p><em>üí° Tous les √©l√©ments sont des objets Phaser natifs (Rectangle, Circle, Polygon) garantissant 100% d'opacit√©.</em></p>
            `;
        }
        
        // Initialiser le jeu
        game = new Phaser.Game(testConfig);
        
        // Message de validation apr√®s 3 secondes
        setTimeout(() => {
            console.log('‚úÖ Validation: Le terrain doit maintenant √™tre 100% opaque avec des objets Phaser solides');
        }, 3000);
    </script>
</body>
</html>
